# 📘 TAITS — Taiwan Alpha Intelligence Trading System

## 📐 完整總架構 × 總流程 × 全資訊體系（MASTER VERSION）

> **用途說明**
>
> * 作為 GPT / Cursor / GitHub 的「最高權威專案文件」
> * 新對話直接貼這份 MD，即可完整接軌
> * 所有後續開發、拆階段、寫 code，皆不得偏離本文件

---

## 0️⃣ TAITS 設計哲學（你這個專案的「靈魂」）

TAITS 不是：

* ❌ 單一策略回測工具
* ❌ 指標疊指標
* ❌ 單模型 AI 猜盤

TAITS 是：

> **以「台股 × 期貨 × 籌碼 × 多智能體 × AI × 風控 × 合規」
> 所構成的「完整交易決策作業系統」**

核心原則：

1. **所有資訊 → 統一進入系統**
2. **所有策略 → 不單獨做決策**
3. **所有決策 → 必須可解釋、可審計**
4. **所有下單 → 必須合法（TWSE / Taifex / 券商）**

---

## 1️⃣ TAITS 最終總體架構（不分 S 階段）

```
┌────────────────────────────────────────────┐
│ Layer 0 : Infrastructure / Runtime          │
├────────────────────────────────────────────┤
│ Layer 1 : Data Sources & Market Feeds       │
├────────────────────────────────────────────┤
│ Layer 2 : Feature / Indicator / Factor      │
├────────────────────────────────────────────┤
│ Layer 3 : Strategy System (285+)             │
├────────────────────────────────────────────┤
│ Layer 4 : Agents (Multi-Intelligence)       │
├────────────────────────────────────────────┤
│ Layer 5 : Regime / Fusion / Decision        │
├────────────────────────────────────────────┤
│ Layer 6 : Portfolio / Risk / Capital        │
├────────────────────────────────────────────┤
│ Layer 7 : Execution (Broker / Simulator)    │
├────────────────────────────────────────────┤
│ Layer 8 : Reporting / UI / Audit             │
└────────────────────────────────────────────┘
```

> ⚠️ **注意**
> 補充資料 20251210、V3.1、285 策略、台指期
> **全部都已被歸位在上述某一層，而不是獨立存在**

---

## 2️⃣ Layer 0 — Infrastructure（你一開始就優化的第 1 點）

**目的**：讓系統「跑得久、不中斷、可擴充」

### 組成

* Python 3.10+
* GitHub（版本權威）
* Cursor / VS Code（編輯）
* Docker（未來）
* Redis（盤中狀態）
* TimescaleDB / Parquet（歷史資料）

> ✔ 對應你最早說的：「不要原型、我要能長期跑的」

---

## 3️⃣ Layer 1 — 全部資訊來源（沒有刪，只有歸位）

### 3.1 台股現貨（TWSE / TPEX）

**來源**：TWSE OpenAPI

包含但不限於：

* OHLC / 成交量 / 5 秒資料
* 零股 / 鉅額 / 異常交易
* 融資融券
* 三大法人（現貨）
* 公司基本資料
* 財報 / EPS / 營收
* 重大訊息 / 處置 / 警示股
* 除權息

➡️ **全部對應：**

* TechnicalAgent
* ChipAgent
* FundamentalAgent
* EventAgent

---

### 3.2 台灣期貨與選擇權（你提醒得完全正確）

**來源**：Taifex OpenAPI

包含：

* 台指期 / 小台 / 電子期 / 金融期
* 台指選擇權 Call / Put
* Put/Call Ratio
* 三大法人（期貨）
* 大額交易人（前 5 / 前 10）
* 未平倉量
* 夜盤 / 日盤
* 保證金 / 結算價

➡️ **對應：**

* DerivativesAgent
* MarketRegimeEngine
* MacroAgent
* RiskAgent

---

### 3.3 券商交易層（實盤）

**來源**：富邦 TradeAPI

* 下單 / 改單 / 刪單
* 成交回報
* 帳務 / 庫存
* 行情 WebSocket

➡️ **只存在於 Execution Layer，不影響決策層**

---

## 4️⃣ Layer 2 — 指標 / 因子系統

### 類型（不縮水）

* 技術指標（MA / RSI / MACD / GMMA / 布林）
* 量能
* 波動
* K 線型態
* 籌碼因子
* 基本面因子
* 期貨因子
* 行為金融因子
* **纏論（你剛問的）**

  * 分型
  * 筆
  * 線段
  * 中樞
  * 背馳

➡️ **纏論不是策略，是「結構因子」**

---

## 5️⃣ Layer 3 — 策略系統（285+，沒有消失）

### 來源

* 《V3.1_285_Strategies.md》
* 補充策略（20251210）

### 策略分類

* 技術策略
* 籌碼策略
* 基本面策略
* 事件策略
* 類股輪動
* 期現套利
* 期權結構
* 行為金融
* AI 策略
* 混合策略

> ⚠️ 重點
> **策略 ≠ 下單權限**
> 策略只產生「意見」

---

## 6️⃣ Layer 4 — Agents（你最核心的設計）

Agents 是「觀點提供者」，不是下單者：

* TechnicalAgent
* ChipAgent
* FundamentalAgent
* NewsAgent
* SentimentAgent
* MacroAgent
* DerivativesAgent
* EventAgent
* AIModelAgent
* RiskAgent
* SummaryAgent

---

## 7️⃣ Layer 5 — Regime × Fusion（第 4 個優化重點）

### Market Regime

* 趨勢 / 盤整 / 高波動 / 風險事件
* 期貨 + 現貨 + 波動綜合判斷

### Fusion Engine

輸入：

* 策略
* Agents
* 市場狀態

輸出：

```json
{
  "final_bias": "BULL / BEAR / NEUTRAL",
  "confidence": 0.0~1.0,
  "reason": "可解釋文字"
}
```

---

## 8️⃣ Layer 6 — Portfolio / Risk

* 資金配置
* 部位限制
* 停損 / 停利
* 風險暴露
* 台股漲跌幅限制
* 期貨保證金

---

## 9️⃣ Layer 7 — Execution

模式：

* Ignore（只分析）
* Paper
* Semi-Auto
* Auto

---

## 🔟 Layer 8 — 報告 / UI / 稽核

* JSON（機器）
* TXT（快速）
* Markdown（人）
* Streamlit UI（未來）

---

# ✅ 結論（非常重要）

| 項目            | 是否完整包含               |
| ------------- | -------------------- |
| 全部資訊來源        | ✅ TWSE + Taifex + 富邦 |
| 全部策略（285+）    | ✅ 沒刪，已歸位             |
| 提出的 4 大優化 | ✅ 全部成為主幹             |

---

# 【TAITS MASTER VERSION】
## 副標題：全架構 × 全流程 × 全資訊體系（2025 完整態）
## 版本：v2025-12-16
## 性質：Only-Add（追加補齊，最高權威）

本章節用於補齊 TAITS 在歷次擴充後，
**尚未被顯性寫入 MASTER VERSION 的核心能力與制度**。

本章節一經加入，視為：
> TAITS 的「單一最高事實來源（Single Source of Truth）」

---

## 一、TAITS 最終 10 層主架構（不可再簡化）

TAITS 為 **10 層不可合併、不可刪減的系統架構**：

| 層級 | 層名稱 | 核心職責 |
|---|---|---|
| L1 | 資料接入層 | 收集所有市場相關資訊 |
| L2 | 資料正規化層 | 統一格式，不刪資料 |
| L3 | 快照與封存層 | 固定當下世界狀態 |
| L4 | 特徵與方法論層 | 技術、威科夫、鮑迪克、題材 |
| L5 | 證據包中樞 | 所有判斷必須有證據 |
| L6 | 市場狀態層（Regime） | 判斷整體環境 |
| L7 | 風控與合規層 | 最高否決權 |
| L8 | 策略與 Universe 層 | 哪些策略可用 |
| L9 | 治理與授權層 | 誰能改、誰能執行 |
| L10 | 呈現與決策層 | 人做最後決定 |

📌 **任何簡化為 5 層、7 層的說法，皆視為錯誤理解。**

---

## 二、全流程總覽（從資料到你）

資料來源
→ 正規化
→ 快照封存
→ 特徵 / 方法論
→ 證據包
→ 市場 Regime
→ 風控 / 合規
→ 策略排序
→ 治理 Gate
→ UI 呈現
→ 人的決定

yaml
複製程式碼

**重要鐵律**：
- 無 Snapshot → 不可判斷  
- 無 Evidence → 不可建議  
- Risk 否決 → 一切停止  

---

## 三、全資訊體系總覽（你要求「一個都不漏」）

### 3.1 市場價格與技術資訊
- K 線結構
- 趨勢 / 均線（含 GMMA、CBL）
- 動能 / 背離
- 波動 / 量能

### 3.2 方法論資訊（勝率核心）
- 威科夫（主力行為、階段）
- 鮑迪克纏論（結構、背離、一致性）

### 3.3 跨市場 Observe-only 資訊
- 期貨（方向、波動、背離）
- 選擇權（OI 壓力、結算風險）
- 融資融券（槓桿、踩踏）

🚫 **上述三者永久禁止下單**

---

### 3.4 基本面與事件
- MOPS 公告
- 財報 / 法說
- 政策 / 法規

---

### 3.5 題材與市場敘事（你反覆強調）
- 主線題材
- 次主線
- 供應鏈擴散
- 中小型爆發
- 社群熱度與謠言風險

📌 **TAITS 不因難量化而忽略題材，只標註風險與證據強度。**

---

## 四、策略的最終定位（再次寫死）

- 策略 ≠ 下單  
- 方法論 ≠ 策略  
- 跨市場 ≠ 可交易  
- TAITS ≠ 自動交易系統  

**TAITS 的角色是：**
> 幫你「看得更早、更廣、更有結構」，  
> 而不是替你下注。

---

## 五、治理與修改鐵律（避免再發生爭議）

### 修改分級
- A 級：Append（允許，鼓勵）
- B 級：Modify（需你授權）
- C 級：Refactor（需你主動要求）

📌 **任何未標示差異的修改，視為無效。**

---

## 六、MASTER VERSION 與 12 份文件的關係

本 MASTER VERSION 為：
- 架構總覽
- 流程總覽
- 資訊體系總覽

細節實作，分散於以下文件：
- 01–12 為「模組級說明」
- MASTER VERSION 為「整體真相」

---

## 七、最終宣告（非常重要）

> 只要 MASTER VERSION + 12 份文件一致，  
> TAITS 即視為「完整、可交接、可長期演進」的系統母體。

---

# 【End of TAITS MASTER VERSION 最終補齊】
