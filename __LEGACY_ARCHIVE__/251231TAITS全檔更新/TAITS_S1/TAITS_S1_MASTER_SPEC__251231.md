# TAITS_S1｜工程落地重整主檔（L1–L11 定位鎖定版）
版本：v1.0（251231）
文件屬性：S1（工程落地支援檔｜Implementation Support）
狀態：可用（用於 Cursor/工程實作；不取代 A/A+ 治理母法）
裁決序位：本檔 **不得凌駕**《DOCUMENT_INDEX → MASTER_ARCH → AI_GOV → GOVERNANCE_STATE》之裁決位階；如有衝突，以母法為準。

---

## 0. 本檔目的與使用邊界

### 0.1 目的
本檔用於「工程落地」階段，將 TAITS 的 Canonical Flow（L1–L11）以**確定語義**重整為：
- 工程可實作的模組邊界與輸入/輸出
- 你（人類最高決策者）可閱讀的層級功能說明
- 可稽核、可回放的 L11 留痕規格（支援後續調整每層合理性）

### 0.2 嚴格邊界（必守）
- 策略 ≠ 下單  
- L9 ≠ 下單、L10 才是你做交易授權/裁決的位置  
- L11 僅做稽核/回放/工程檢視，**不得**作為下單入口  
- AI 只做輔助：不可越權改變層級功能、不可腦補缺漏條文、不可刪減既有備註語義

---

## 1. L1–L11 層級定位（確定語義｜鎖定口徑）

> 你已裁決的口徑（本檔以此作為工程落地的「唯一有效解讀」）：
> - L1–L8：收集/整理/萃取各類資訊與證據（消息/基本/技術/籌碼/策略候選…）
> - L9：**詳細投資報告層**（你要看的主報告，且可追蹤）
> - L10：**人類裁決與交易授權層**（你決定不動作/回測/模擬/半自動/全自動等模式）
> - L11：**工程稽核回放層**（全層留痕、回放、對帳、可讀摘要；用於檢視每層合理性與調整）

### L1｜資料取得（Data Ingestion）
**目的**：取得原始資料，建立來源/時間/權限/完整性標記。  
**輸入**：資料源清單、抓取參數、權限金鑰（如適用）。  
**輸出（工件）**：
- 原始快照（raw payload）
- 來源標籤（source_id）、時間戳（event_time/ingest_time）
- 完整性/缺漏標記（integrity flags）

### L2｜資料清洗與標準化（Cleaning & Normalization）
**目的**：將 L1 原始資料清洗、去噪、對齊欄位，形成可計算的標準資料。  
**輸出（工件）**：
- 正規化資料表/序列（normalized tables/series）
- 欄位對照、缺漏策略、異常標記（anomaly flags）
- 可追溯 mapping（raw → normalized）

### L3｜特徵/指標與狀態快照（Features & Snapshots）
**目的**：把標準化資料轉成可用於後續分析的特徵/指標；建立一致時點快照。  
**注意**：數值計算由工程/程式負責；AI 僅可協助描述/解釋。  
**輸出（工件）**：
- 指標集（例如技術指標、事件標記、籌碼彙總）
- Snapshot（time T 的狀態封存）
- 版本/哈希（支援重播）

### L4｜面向分析（News/Fundamental/Technical/Chip/Other）
**目的**：分面向分析與結構化結論（仍是中間產物，不對你做最終投資報告呈現）。  
**輸出（工件）**：
- 分面向分析摘要（可結構化欄位）
- 重要證據點與連結（引用指向 L5）

### L5｜證據包（Evidence Pack）
**目的**：把可支撐結論的證據整理成可追溯、可引用、可稽核的包。  
**輸出（工件）**：
- EvidencePack（含 provenance：來源、時間、版本、摘要、定位）
- 引用索引（供 L9 報告引用與 L11 稽核對帳）

### L6｜Regime / Context（市場狀態與情境）
**目的**：判定市場/標的所處狀態（例如趨勢、盤整、事件衝擊期等），作為後續策略候選與風控門檻的共同語境。  
**輸出（工件）**：
- regime_label（狀態類別）
- 置信度/不確定性（confidence/uncertainty）
- 觸發條件與變更跡象（switch signals）

### L7｜風險/合規 Gate（最高否決權）
**目的**：以規則/制度做硬性檢查：曝險、限制、禁做、降級。  
**注意**：Gate 結論必須可規則化與可證明；AI 僅可協助「人話解釋」。  
**輸出（工件）**：
- gate_decision：PASS / BLOCK / DOWNGRADE
- 理由（rule_id、threshold、evidence pointers）
- 建議限制（但不等於下單）

### L8｜策略候選與方案集（Strategy Proposals）
**目的**：在 L6/L7 約束下，產生策略候選、情境假設、參數方案與風險提示。  
**注意**：此層仍不是下單；只輸出候選方案（proposal）。  
**輸出（工件）**：
- proposal_set（多方案、假設、觸發/失效條件）
- 方案所需證據引用（指向 L5）
- 風險提示（對應 L7 規則）

---

## 2. L9–L11（你裁決的核心口徑｜本次重整鎖定）

### L9｜詳細投資報告層（Investment Dossier）
**定位（鎖定）**：L9 是「你要看的」詳細投資報告層，**不是**單純解說，更不是下單。  
**必備內容（最低要求）**：
1) **數據**：引用 L2/L3 的關鍵數據與統計（以表格/關鍵值呈現）
2) **圖形**：至少包含主要趨勢圖/指標圖（由工程生成圖；報告負責解釋）
3) **進出場價格建議（proposal）**：  
   - 進場區間、出場區間、停損/停利參考（皆為建議，不是下單）
4) **追蹤性（標的化）**：  
   - report_id / symbol_id / regime_label / version / time_range
   - 更新策略：同一標的在事件變動時可產生新版本報告（不可覆寫舊版本）
5) **可追溯引用**：所有關鍵結論必須能回指 EvidencePack（L5）

**輸出（工件）**：
- L9_Report（人類可讀：章節化、圖表、結論與建議）
- L9_Report_Metadata（機器可讀：JSON/Schema，供 L11 與追蹤）

### L10｜人類裁決與交易授權層（Human Decision & Trade Authorization）
**定位（鎖定）**：L10 是你的裁決層，也是「交易授權」層；TAITS 在此接受你的決定並進入相應模式。  
**你可裁決的模式（必列）**：
- NO_ACTION（不動作）
- BACKTEST（回測）
- SIMULATION（模擬）
- PAPER（紙上/模擬下單）
- LIVE_SEMI（半自動：你確認後執行）
- LIVE_AUTO（全自動：在授權封套內自動執行）

**L10 輸入**：L9 報告（含 proposal）+ L7 Gate 結果 + 你的偏好/限制（授權封套）。  
**L10 輸出（工件）**：
- decision_record（你的裁決：模式/授權封套/有效期/撤銷條件）
- execution_intent（僅在你授權的情況下形成；供執行層使用）
- decision_rationale（你可選：簡短理由；用於 L11 稽核）

### L11｜工程稽核回放層（Audit / Replay / Engineering Inspection）
**定位（鎖定）**：L11 是工程稽核層，不是交易層。目的在於：
- **全層留痕**：L1–L11 的每一層都要有工件與指紋（hash）可回放
- **可讀回放**：你也能看懂（人話摘要），工程也能用（結構化/索引）
- **合理性檢視**：用來檢查每層功能是否合理、是否需要調整，而不是臨場下單

**雙料輸出（必備）**：
- Human-Readable：稽核摘要、差異解釋、關鍵事件時間線
- Machine-Readable：工件索引、hash ledger、版本鏈、路由紀錄

**輸出（工件）**：
- audit_manifest（全工件索引 + hash + 版本鏈）
- replay_bundle（可重播的最小集合）
- audit_summary（人話 + 工程摘要）

---

## 3. 本地環境基線（避免再被吃掉｜確定記錄）

> 這一段是「確定內容」：後續不得被 AI 腦補/改寫/縮減。

- OS：Windows 11
- CPU：Intel Core i7-8750H
- RAM：32GB
- GPU：NVIDIA GeForce GTX 1050 Ti（4GB VRAM）
- Storage：256GB SSD + 750GB HDD
- 裝置：ASUS FX504GE（筆電）

**本地部署可承擔層（建議）**：
- 優先本地化：L11（稽核摘要/索引解釋）、L1/L2（敏感文字抽取/欄位化）、L5（短 evidence 條列）
- 不建議本地硬扛：L9 長篇高品質報告主稿、L6 重推理（受 4GB VRAM 限制）

---

## 4. 工程落地最小要求（S1 檢核）

- 任何 L9 結論必須可回指 L5 EvidencePack
- 任何 L10 授權必須落盤 decision_record 並可撤銷
- 任何 L11 必須能回放「同一版本輸入」得到一致的工件鏈
- 模型/工具只是一種執行手段：**不得改變層級語義**

（完）
