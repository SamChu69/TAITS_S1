# TAITS_全系統架構總覽__250116.md

> doc_key：FULL_ARCH  
> 治理等級：B（System Architecture Overview｜承接 MASTER_CANON / ARCH_FLOW）  
> 適用範圍：TAITS 全系統（Research / Backtest / Simulation / Paper / Live）  
> 版本狀態：ACTIVE（架構層總覽，可隨系統擴充 Only-Add）

---

## 0. 文件定位（Architecture Overview）

本文件為 **TAITS 全系統架構總覽圖譜（System Architecture Map）**，  
其目的在於：

- 以 **模組化視角** 描述 TAITS 的整體系統構成
- 說清楚 **每一層在系統中的角色與邊界**
- 作為 **工程實作、Agent 佈署、資料流設計、UI 組裝** 的共同語言

📌 本文件：
- **不定義 Canonical 流程順序**（由 MASTER_CANON / ARCH_FLOW 定義）
- **不定義制度鐵律**（由 MASTER_ARCH 定義）
- 專注於「系統由哪些部分構成、如何彼此連結」

---

## 1. TAITS 系統總體分層（System Layering）

TAITS 採用 **橫向模組 × 縱向層級** 的雙維度架構：

### 縱向（流程層）
- L1–L11 Canonical Flow（不可跳步）

### 橫向（系統模組）
- Data Layer
- Analysis Layer
- Decision Layer
- Governance Layer
- Execution Layer
- Interface Layer
- Infrastructure Layer

👉 **任何模組必須同時歸屬一個橫向模組與一個縱向層級**

---

## 2. 核心系統模組總覽（Modules Overview）

### 2.1 Data Layer（資料層）

**角色定位**
- 系統的「感知器官」
- 所有決策的起點

**包含模組**
- DataSources Adapter
- Data Collector
- Data Validator
- Data Normalizer

**對應層級**
- L1 / L2

**關鍵原則**
- 官方資料優先
- 多層 fallback
- 原始資料必須可追溯

---

### 2.2 Snapshot & State Layer（狀態層）

**角色定位**
- 系統的「即時狀態描述」

**包含模組**
- Market Snapshot Builder
- State Cache
- Replay / Audit Engine

**對應層級**
- L3

**關鍵原則**
- Snapshot 必須可回放
- 不得只存在於記憶體

---

### 2.3 Analysis Layer（分析層）

**角色定位**
- 將資料轉為可解釋特徵

**包含模組**
- Feature Engine
- Indicator Engine
- Statistical Engine
- Structure Analysis

**對應層級**
- L4

**禁止事項**
- 不得產生交易方向
- 不得跳過證據層

---

### 2.4 Evidence & Regime Layer（證據與狀態層）

**角色定位**
- 系統的「判斷基礎」

**包含模組**
- Evidence Bundle Assembler
- Evidence Conflict Resolver
- Market Regime Engine

**對應層級**
- L5 / L6

**關鍵原則**
- 多證據、非單訊號
- Regime 為策略啟用前置條件

---

### 2.5 Risk & Compliance Layer（風控與合規層）

**角色定位**
- 系統的「煞車系統」

**包含模組**
- Risk Exposure Analyzer
- Liquidity Checker
- Compliance Rules Engine

**對應層級**
- L7

**權限**
- 最高否決權
- 可跨層中止流程

---

### 2.6 Strategy & Research Layer（策略與研究層）

**角色定位**
- 產生「假設與建議」

**包含模組**
- Strategy Library
- Universe Selector
- Backtest / Simulation Engine

**對應層級**
- L8

**限制**
- 永遠不直連下單
- 僅輸出條件與情境

---

### 2.7 Governance Layer（治理層）

**角色定位**
- 系統的「流程守門員」

**包含模組**
- Flow Validator
- Evidence Completeness Checker
- Governance Gate

**對應層級**
- L9

**關鍵原則**
- 不通過即退回
- 不存在例外捷徑

---

### 2.8 Interface Layer（介面層）

**角色定位**
- 人與系統的唯一交界面

**包含模組**
- Visualization Engine
- Explainability Engine
- Decision Support UI

**對應層級**
- L10

**關鍵原則**
- 可解釋性優先
- 風險揭露優先於績效

---

### 2.9 Execution & Control Layer（執行與控制層）

**角色定位**
- 合規前提下的執行單元

**包含模組**
- Order Executor
- Real-time Monitor
- Kill Switch / Circuit Breaker

**對應層級**
- L11

**關鍵原則**
- 完整記錄
- 可即時中止

---

### 2.10 Infrastructure Layer（基礎設施層）

**角色定位**
- 支撐整個系統的底層能力

**包含模組**
- Storage / Database
- Message Queue
- Logging & Audit
- Version Control

**對應層級**
- 橫跨 L1–L11

---

## 3. Agent 於系統架構中的定位

### 3.1 Agent 的本質

- Agent 是 **模組的操作單位**
- 不是策略
- 不是流程本身

### 3.2 Agent 行為約束

- 每個 Agent：
  - 必須綁定所屬模組
  - 必須標註所屬層級
- Agent 不得：
  - 跨層產出
  - 私下串聯形成隱性策略

---

## 4. 模組間資料流（High-Level Data Flow）

```

Data Layer
↓
Snapshot / State
↓
Analysis
↓
Evidence & Regime
↓
Risk & Compliance ──┐
↓                │（否決可中斷）
Strategy & Research │
↓                │
Governance Gate ◀───┘
↓
UI / Human Decision
↓
Execution & Control

```

---

## 5. 與其他核心文件的關係

- **受制於**
  - MASTER_ARCH（最高鐵律）
  - MASTER_CANON（流程順序）
  - ARCH_FLOW（流程細化）

- **被引用於**
  - UI_Spec
  - Deployment_and_Operation
  - Risk_and_Compliance

---

## 6. 演進與擴充原則（Only-Add）

- 可新增模組
- 可拆分子模組
- **不可破壞既有層級與否決鏈**

---

## 7. 最終架構宣告

> **TAITS 的系統架構不是為了「多功能」，  
而是為了確保：  
任何錯誤，都有一個層級可以把它擋下來。**

---

（End of FULL_ARCH）
