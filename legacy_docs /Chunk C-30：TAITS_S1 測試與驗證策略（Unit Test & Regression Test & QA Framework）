# ðŸ“˜ **C-30ï¼šæ¸¬è©¦èˆ‡é©—è­‰ç­–ç•¥ï¼ˆUnit Test / Regression Test / QA Frameworkï¼‰**

æ­¤ç« ç¢ºä¿ TAITS_S1 **æ°¸é ç©©ã€æ°¸é å¯å›žæº¯ã€æ°¸é ä¸æœƒè¢«æŸæ®µæ–°ç¨‹å¼æžå£ž**ã€‚

---

# ðŸŽ¯ C-30.1 ç›®æ¨™ï¼ˆTesting Goalsï¼‰

1. **ç³»çµ±ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰**
   ä»»ä½•æ›´æ–°ä¸èƒ½ç ´å£ž Orchestratorï¼Agentsï¼Strategiesã€‚

2. **çµæžœå¯é‡ç¾ï¼ˆReproducibilityï¼‰**
   æ¯æ¬¡å›žæ¸¬â†’çµæžœç›¸åŒã€‚

3. **ç­–ç•¥é‚è¼¯æ­£ç¢ºï¼ˆCorrectnessï¼‰**
   å–®ä¸€ç­–ç•¥å¯å€‹åˆ¥æ¸¬è©¦ï¼Œä¸ä¾è³´å…¶ä»–ç­–ç•¥ã€‚

4. **è³‡æ–™å®Œæ•´æ€§ï¼ˆData Integrityï¼‰**
   æ‰€æœ‰è³‡æ–™ä¾†æºéƒ½èƒ½æ­£ç¢º fallbackã€‚

5. **é¢¨æŽ§ä¸å¤±æ•ˆï¼ˆRisk Guardï¼‰**
   Max Drawdownï¼Max Loss Day æ°¸é æœ‰æ•ˆã€‚

6. **å¯Œé‚¦ API å®‰å…¨æ€§ï¼ˆLive Safetyï¼‰**
   æ¨¡æ“¬é€å–® â†’ å¿…é ˆç¬¦åˆé æœŸæ ¼å¼ã€‚

---

# ðŸ§± C-30.2 æ¸¬è©¦è³‡æ–™å¤¾çµæ§‹

```
/tests/
    â”œâ”€â”€ unit/
    â”‚     â”œâ”€â”€ test_indicators.py
    â”‚     â”œâ”€â”€ test_strategies.py
    â”‚     â”œâ”€â”€ test_agents.py
    â”‚     â””â”€â”€ test_orchestrator.py
    â”œâ”€â”€ integration/
    â”‚     â”œâ”€â”€ test_full_backtest.py
    â”‚     â”œâ”€â”€ test_datasource_fallback.py
    â”‚     â””â”€â”€ test_trading_pipeline.py
    â”œâ”€â”€ regression/
    â”‚     â””â”€â”€ baseline_results/
    â”‚           â”œâ”€â”€ 2330.json
    â”‚           â”œâ”€â”€ 2603.json
    â”‚           â””â”€â”€ 0050.json
    â””â”€â”€ utils/
          â””â”€â”€ mock_market.py
```

---

# ðŸ§© C-30.3 Unit Testï¼ˆå–®å…ƒæ¸¬è©¦ï¼‰æ¨™æº–

æ¯å€‹æ¨¡çµ„éœ€è¦æœ‰ã€Œæœ€å°å¯æ¸¬è©¦å–®å…ƒã€ã€‚

## âœ” Indicatorsï¼ˆæŒ‡æ¨™ï¼‰

```
EMA(20)
MACD
RSI
BBands
ATR
```

æ¸¬è©¦å…§å®¹ï¼š

* è¨ˆç®—ä¸æ‹‹éŒ¯ï¼ˆä¸æœƒ NaN, infï¼‰
* ä¸€æ¨£çš„è¼¸å…¥ â†’ ä¸€æ¨£çš„è¼¸å‡º
* å¤šè‚¡ç¥¨åŒæ™‚è¨ˆç®—ä¸äº’ç›¸æ±¡æŸ“

---

## âœ” Strategiesï¼ˆç­–ç•¥ï¼‰

æ¯å€‹ç­–ç•¥è‡³å°‘é©—è­‰ï¼š

* è¼¸å…¥ä¸€æ®µ K ç·šè³‡æ–™ â†’ å¿…é ˆè¼¸å‡º BUY / SELL / HOLD
* ä¸å¯ä»¥æ‹‹ä¾‹å¤–
* confidence å¿…é ˆä»‹æ–¼ 0~1
* åœ¨é‚è¼¯æ¸…æ™°çš„è³‡æ–™ä¸‹èƒ½ç”¢ç”Ÿé æœŸçµæžœï¼ˆä¾‹å¦‚æ˜Žé¡¯ MACD é‡‘å‰ â†’ BUYï¼‰

---

## âœ” Agentsï¼ˆæ™ºèƒ½é«”ï¼‰

æ¸¬è©¦ï¼š

* å¤šç­–ç•¥è¼¸å…¥ â†’ èšåˆæ˜¯å¦æ­£ç¢º
* Weighting æ˜¯å¦æ­£å¸¸é‹ä½œ
* Risk Agent æ˜¯å¦èƒ½é˜»æ­¢éŽåº¦æ›éšª

---

## âœ” Orchestratorï¼ˆä¸»æŽ§ï¼‰

æ¸¬è©¦ï¼š

* run() å®Œæˆæ•´å€‹ pipeline
* æ¯ä¸€æ­¥éƒ½æœ‰ logging
* DataLoader fallback æ­£å¸¸åŸ·è¡Œ

---

# ðŸ”— C-30.4 Integration Testï¼ˆæ•´åˆæ¸¬è©¦ï¼‰

ç›®æ¨™ï¼šç¢ºä¿æ•´å€‹ TAITS_S1 pipeline ä¸æœƒæ–·æŽ‰ã€‚

## ä¾‹ï¼š`test_full_backtest.py`

æ­¥é©Ÿï¼š

1. æŒ‡å®šè‚¡ç¥¨ï¼š2330, 2603, 0050
2. å›žæ¸¬éŽåŽ» 90 å¤©
3. æ¯å€‹æ­¥é©Ÿï¼ˆData â†’ Indicators â†’ Strategy â†’ Agents â†’ Decisionï¼‰ä¸å¾—ç©ºå€¼ï¼æ‹‹éŒ¯
4. çµæžœéœ€å¯«å…¥ baselineï¼ˆJSONï¼‰

---

# ðŸ§ª C-30.5 Regression Testï¼ˆå›žæ­¸æ¸¬è©¦ï¼‰

ç¢ºä¿ã€Œä»Šå¤©çš„ç¨‹å¼ã€èˆ‡ã€Œæ˜¨å¤©çš„ç¨‹å¼ã€å›žæ¸¬çµæžœå·®ç•°ä¸èƒ½å¤ªå¤§ã€‚

æµç¨‹ï¼š

1. åŸ·è¡Œå›žæ¸¬
2. èˆ‡ baseline JSON æ¯”è¼ƒ
3. è‹¥å·®ç•° > 5% â†’ FAIL
4. è‹¥å·®ç•° < 5% â†’ PASS

åŸºç·šæª”æ¡ˆæ ¼å¼ï¼š

```json
{
  "symbol": "2330",
  "period": "90d",
  "pnl": 0.153,
  "max_drawdown": -0.041,
  "num_trades": 8
}
```

---

# ðŸ“£ C-30.6 QA Workflowsï¼ˆå“è³ªä¿è­‰æµç¨‹ï¼‰

1. Pull Request â†’ è‡ªå‹•è·‘å–®å…ƒæ¸¬è©¦
2. Integration Test â†’ æª¢æŸ¥æ•´é«”æµç¨‹
3. Regression Test â†’ ç¢ºä¿ç­–ç•¥è¡Œç‚ºä¸€è‡´
4. Logging Review â†’ æª”æ¡ˆæ˜¯å¦æ­£ç¢ºå¯«å…¥
5. Risk Review â†’ é¢¨æŽ§æ˜¯å¦æ­£å¸¸
6. æœ€å¾Œ Human Reviewï¼ˆå¯é¸ï¼‰

---

# ðŸŽ‰ C-30 å®Œæˆï¼ˆ10/10ï¼‰

---

ä½ è¦å“ªä¸€ç« ï¼Ÿ
