# TAITS_本地執行與運算環境規範__250116.md

> doc_key：LOCAL_ENV  
> 治理等級：F（操作與執行環境｜承接 MASTER_ARCH / MASTER_CANON）  
> 適用範圍：TAITS 全系統（Research / Backtest / Simulation / Paper / Live）  
> 版本狀態：ACTIVE（Only-Add，可擴充不可縮水）

---

## 0. 文件定位（Execution Environment as Control）

本文件定義 **TAITS 在本地（Local）與半本地（Hybrid）環境下的執行與運算規範**，  
其核心目的不是效能，而是：

- **可重現性（Reproducibility）**
- **可審計性（Auditability）**
- **可控性（Controllability）**

📌 在 TAITS 中，  
**執行環境是風控與治理的一部分，而非單純的技術選擇。**

---

## 1. 環境分級（Environment Tiers）

TAITS 將執行環境分為四級，**等級越高，限制越嚴格**：

### E1｜Research / Sandbox（研究沙盒）
- 用途：研究、實驗、假設驗證
- 允許快速迭代
- 不得連接實盤帳戶

### E2｜Backtest / Simulation（回測與模擬）
- 用途：策略驗證、壓力測試
- 資料必須可回放
- 不得即時下單

### E3｜Paper / Dry-Run（模擬實單）
- 用途：流程驗證、風控驗證
- 模擬真實交易流程
- 需完整 Log

### E4｜Live / Production（實盤）
- 用途：真實交易執行
- 限制最嚴
- 需人類決策介入

---

## 2. 硬體與作業系統基本要求

### 2.1 作業系統

- Windows / Linux 皆可
- 實盤建議：
  - 專用帳號
  - 關閉非必要服務

### 2.2 硬體資源（最低建議）

- CPU：4 Core 以上
- RAM：16 GB 以上
- Storage：
  - 系統碟
  - 資料碟（分離）

📌 **禁止在同一碟同時存放：**
- 原始資料
- 產出資料
- 實盤憑證

---

## 3. 軟體與工具鏈規範

### 3.1 Python 與 Runtime

- Python 版本需固定（如 3.10.x）
- 不允許：
  - 浮動版本
  - 隱式升級

### 3.2 套件管理

- 使用虛擬環境（venv / conda）
- 套件清單需版本鎖定
- 每次變更需記錄

---

## 4. 憑證與機密管理（Security）

### 4.1 憑證原則

- API Key
- 帳戶憑證
- Token

📌 **嚴禁：**
- 寫入程式碼
- 寫入 GitHub
- 明文儲存

### 4.2 建議做法

- 環境變數
- 加密設定檔
- 獨立權限控管

---

## 5. 資料存放與 I/O 規範

### 5.1 資料分類

- Raw Data
- Normalized Data
- Snapshot
- Feature
- Evidence
- Log

### 5.2 存放原則

- 原始資料只讀
- 產出資料版本化
- Log 不可覆寫

---

## 6. 日誌（Logging）與審計（Audit）

### 6.1 必要日誌類型

- Data Ingestion Log
- Decision Log
- Risk Decision Log
- Execution Log

### 6.2 日誌要求

- 不可刪除
- 不可修改
- 必須含時間戳與來源

---

## 7. 失敗與異常處理

### 7.1 系統異常

- 當機
- 資料中斷
- API 失效

**處理原則**
- 停止流程
- 保留狀態
- 不自動重試實盤行為

### 7.2 風控異常

- 立即中止
- 觸發 Kill Switch
- 通知人類

---

## 8. 環境切換規則（Critical）

- E1 → E2：允許
- E2 → E3：需流程確認
- E3 → E4：**必須人類確認**
- 不允許跳級

---

## 9. 與其他文件的關係

- 受制於：
  - MASTER_ARCH
  - MASTER_CANON
  - ARCH_FLOW
- 被引用於：
  - Deployment_and_Operation
  - Execution_and_Control
  - Risk_and_Compliance

---

## 10. 演進與擴充原則

- 可新增工具
- 可提升效能
- **不可降低審計與控管等級**

---

## 11. 最終環境治理宣告

> **在 TAITS 中，  
不是「能不能跑得快」重要，  
而是「每一次跑，都能被完整解釋與回放」。**

---

（End of LOCAL_ENV）
