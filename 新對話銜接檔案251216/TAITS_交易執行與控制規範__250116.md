# TAITS_交易執行與控制規範__250116.md

> doc_key：EXECUTION_CONTROL  
> 治理等級：E（執行層＋風控即時控制｜受制於最高否決）  
> 適用範圍：TAITS 全系統（Paper / Live 為主，Simulation 對齊）  
> 版本狀態：LOCKED（僅可由人類主權覆寫）

---

## 0. 文件定位（Execution as Controlled Act）

本文件定義 **TAITS 的交易執行與即時控制之唯一合法規範**。  
在 TAITS 中：

> **執行不是策略的延伸，  
而是在「人類決策 + 風控允許」下的受控行為。**

📌 本文件：
- 不授權策略下單
- 不允許 AI 自動化決策
- 專注於 **如何在可審計、可中止的前提下執行**

---

## 1. 執行治理的核心原則（不可違反）

### 1.1 執行前置條件原則（Preconditions）

任何執行行為，**必須同時滿足**：

1. 已通過 Canonical Flow（L1–L9）
2. L7（RISK_COMPLIANCE）為 Pass
3. L10 已產生 **Human Decision**
4. 執行環境等級符合（LOCAL_ENV）

📌 任一條件不成立 → **禁止執行**

---

### 1.2 執行不可回推原則

- 執行只負責「做」
- **不得回推或重寫決策理由**
- 事後調整僅能發生於研究層（D 級）

---

### 1.3 最小權限原則（Least Privilege）

- 執行模組僅擁有：
  - 必要帳戶權限
  - 必要下單能力
- **不得存取策略邏輯或證據推論**

---

## 2. 執行模式定義（Execution Modes）

TAITS 支援四種執行模式：

### E0｜Disabled（預設）
- 不允許任何下單
- 僅觀察與回放

### E1｜Simulation
- 全流程模擬
- 不觸及真實帳戶

### E2｜Paper Trading
- 模擬實單
- 驗證流程與風控

### E3｜Live Execution
- 真實下單
- 限制最嚴

📌 **模式切換受 LOCAL_ENV 規範約束**

---

## 3. 下單類型與限制（Order Controls）

### 3.1 允許的下單類型

- 市價單
- 限價單
- 條件單（僅風控條件）

### 3.2 禁止的行為

- 隱性自動加碼
- 無記錄調整
- 風控未確認之追單

---

## 4. 即時監控與控制（Real-time Control）

### 4.1 即時監控項目

- 價格異常
- 成交異常
- 延遲與滑價
- 系統狀態

### 4.2 Kill Switch（必備）

Kill Switch 必須能即時觸發於：

- 風控否決
- 系統異常
- 人類手動中止

📌 Kill Switch 觸發後：
- 立即停止新單
- 依規範處理未成交單

---

## 5. 失敗與異常處理（Failure Handling）

### 5.1 下單失敗

- API 錯誤
- 連線中斷
- 交易所拒單

**處理**
- 記錄
- 不自動重試（Live）

---

### 5.2 執行中異常

- 市場急變
- 流動性消失
- 法規限制變更

**處理**
- 立即中止
- 回報風控
- 等待人類指示

---

## 6. 執行紀錄與審計（Audit Trail）

每一次執行，**必須完整記錄**：

- Decision ID（來源於 L10）
- 下單參數
- 成交回報
- 時間戳
- 觸發風控事件（若有）

📌 **執行紀錄不可刪除、不可覆寫**

---

## 7. 與風控的即時互鎖（Hard Interlock）

- 風控模組：
  - 可即時中止執行
  - 不需等待執行層回應
- 執行層：
  - 不得拒絕風控中止

---

## 8. 人類主權於執行層的角色

- 人類可：
  - 手動下單
  - 手動中止
  - 調整執行模式
- AI 僅能：
  - 協助監控
  - 提示風險

---

## 9. 與其他文件的關係

- 受制於：
  - MASTER_ARCH
  - MASTER_CANON
  - RISK_COMPLIANCE
  - LOCAL_ENV
- 被引用於：
  - Deployment_and_Operation
  - UI_Spec

---

## 10. 變更與版本規則

- 本文件預設 LOCKED
- 修改需：
  - 人類主權覆寫
  - 新版本檔名
  - 更新 Document_Index

---

## 11. 最終執行宣告

> **在 TAITS 中，  
能不能下單不是問題，  
「什麼時候必須停下來」才是系統價值所在。**

---

（End of EXECUTION_CONTROL）
